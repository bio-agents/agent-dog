.. AgentDog - Agent description generator

.. _how_to_use:

********************
How to use AgentDog ?
********************

AgentDog can either generates a template from a bio.agents entry for Galaxy or CWL but
also annotates exiting agent descriptors with missing metadata.
AgentDog supports generation of XML files for Galaxy (`-g/--galaxy`) or CWL agent (`-c/--cwl`).
It works in two main steps: **(1)** Analysis of the source code when possible (for the moment, only
support Python code using argparse), **(2)** Addition of metadata to the agent description.

.. Note::
   If you find a bug, have any questions or suggestions, please `create an issue`_ on
   GitHub or contact us on `Gitter`_.

.. _create an issue: https://github.com/bio-agents/AgentDog/issues
.. _Gitter: https://gitter.im/AgentDog/Lobby

.. _online_import:

Import from https://bio.agents entry
===================================

You can generate a XML for Galaxy from an online https://bio.agents description from the identifier
using the following command:

.. code-block:: bash

    agentdog -g/--galaxy id > outfile.xml

.. _local_import:

Import from JSON local file
===========================

To generate XML from a local file downloaded from http://bio.agents, use the following command:

.. code-block:: bash

    agentdog -g/--galaxy file.json > outfile.xml


Annotation of existing files
============================

You can also use AgentDog to add missing metadata from your agent descriptor if the agent
is registered on https://bio.agents:

.. code-block:: bash

    agentdog -g/--galaxy id --existing_desc your_xml.xml > annotated_xml.xml

.. Note::
    For the moment, only annotation of Galaxy XML is supported.

Advanced options
================

Please refer to the help section (``agentdog -h``) of AgentDog to see the full list of options.

Run parts independently
-----------------------

You can decide to run both parts of AgentDog in an independant manner using ``agentdog -g id --analyse``
and ``agentdog -g id --annotate`` options. 

Use your own settings and local files
-------------------------------------

AgentDog offers the possibility to use your own settings for most of the step of the generation.

Options for source code analysis
""""""""""""""""""""""""""""""""

- ``--source_language``: specify the language of your source code.
- ``--source_code``: specify the path to your source code directory.

.. Warning::
    For the moment, only analysis of Python code is available

Options for agent description annotation
"""""""""""""""""""""""""""""""""""""""

- ``--inout_bioagents``: select this option to also add inputs and outputs found on the https://bio.agents description to your Galaxy XML or CWL agent description.

Options specific to Galaxy XML generation
"""""""""""""""""""""""""""""""""""""""""

The options below are used for the mapping between EDAM formats and data to Galaxy datatypes. As some Galaxy instances sometimes have their own defined datatypes, you can here specify the url:

- ``--galaxy_url``: URL of the Galaxy instance (default is https://usegalaxy.org)
- ``--edam_url``: URL or local path to EDAM.owl (default is http://edamontology.org/EDAM.owl)
- ``--mapping_file``: this is a JSON file generated by AgentDog that you can keep once you have performed your own mapping.
